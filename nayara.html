<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Costa Rica Family Trip Planner - Nayara Gardens</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f9b8e 0%, #1e5f5a 50%, #2b3e50 100%);
            background-attachment: fixed;
            color: #333;
            line-height: 1.6;
            padding: 0;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .top-nav {
            background: rgba(15, 155, 142, 0.95);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 10;
        }

        .top-nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: white;
        }

        .nav-link.active {
            background: white;
            color: #0f9b8e;
        }

        .hero-header {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%);
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .hero-header::before {
            content: "üåã ü¶• üå∫ üê∏ üåø ‚òÄÔ∏è ü¶ú üåã ü¶• üå∫ üê∏ üåø ‚òÄÔ∏è ü¶ú";
            position: absolute;
            top: 10px;
            left: 0;
            width: 200%;
            font-size: 1.5em;
            opacity: 0.3;
            animation: scroll 30s linear infinite;
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .hero-header h1 {
            font-family: 'Playfair Display', serif;
            color: white;
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .hero-header .subtitle {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.4em;
            font-weight: 300;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 50px;
            position: relative;
            z-index: 1;
        }

        .content-wrapper {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            margin-top: -40px;
            position: relative;
            z-index: 2;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        h2 {
            font-family: 'Playfair Display', serif;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .trip-info {
            background: linear-gradient(135deg, #d4f1e8 0%, #e8f5e9 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            border-left: 6px solid #10b981;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.15);
        }

        .trip-info h3 {
            color: #047857;
            margin-bottom: 15px;
            font-size: 1.5em;
            font-weight: 600;
        }

        .trip-info p {
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .activity-card {
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 25px;
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .activity-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.25);
            border-color: #10b981;
        }

        .activity-card.selected {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .activity-tag {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tag-resort { background: #e3f2fd; color: #1976d2; }
        .tag-adventure { background: #fff3e0; color: #f57c00; }
        .tag-wildlife { background: #f3e5f5; color: #7b1fa2; }
        .tag-hot-springs { background: #ffebee; color: #c62828; }
        .tag-older-kids { background: #fce7f3; color: #be185d; }
        .tag-relaxing { background: #e8f5e9; color: #388e3c; }
        .tag-cultural { background: #fff9c4; color: #f57f17; }

        .activity-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .activity-description {
            color: #555;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .activity-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .detail-item {
            font-size: 0.9em;
        }

        .detail-label {
            font-weight: bold;
            color: #666;
        }

        .detail-value {
            color: #333;
        }

        .day-section {
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f0fdf4 0%, #f9fafb 100%);
            border-radius: 20px;
            border: 3px solid #d1fae5;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .day-section:hover {
            border-color: #10b981;
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.15);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .day-title {
            font-size: 1.8em;
            color: #047857;
            font-family: 'Playfair Display', serif;
        }

        .day-activities {
            min-height: 100px;
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .selected-activity {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4caf50;
        }

        .selected-activity h4 {
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            float: right;
            font-size: 0.85em;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        .add-activity-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
        }

        .add-activity-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .category-filter {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 12px 24px;
            border: 2px solid #d1fae5;
            background: white;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .filter-btn:hover {
            border-color: #10b981;
            color: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.35);
        }

        .print-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            display: block;
            margin: 40px auto;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
            transition: all 0.3s ease;
        }

        .print-btn:hover {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.4);
        }

        .empty-day {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            font-size: 2em;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        .participant-selector {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 2px solid #e5e7eb;
        }

        .participant-selector h3 {
            color: #047857;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .participant-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .participant-btn {
            padding: 10px 20px;
            border: 2px solid #d1fae5;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
        }

        .participant-btn:hover {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .participant-btn.selected {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .participant-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 6px;
            margin-bottom: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .participant-all { background: #dbeafe; color: #1e40af; }
        .participant-older-kids { background: #fce7f3; color: #be185d; }
        .participant-younger-kids { background: #fef3c7; color: #d97706; }
        .participant-adults-only { background: #e0e7ff; color: #4338ca; }
        .participant-split-groups { background: #f3e8ff; color: #7c3aed; }
        .participant-custom { background: #e5e7eb; color: #374151; }

        .participants-display {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e5e7eb;
        }

        .confirm-activity-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 600;
            width: 100%;
            margin-top: 15px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
        }

        .confirm-activity-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .confirm-activity-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .modal-step-1, .modal-step-2 {
            transition: all 0.3s ease;
        }

        .modal-step-1.hidden, .modal-step-2.hidden {
            display: none;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .add-activity-btn, .remove-btn, .print-btn, .filter-btn, .top-nav {
                display: none;
            }
        }

        .activity-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
            text-align: center;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .jump-link:hover {
            background: #10b981;
            color: white !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        @media (max-width: 768px) {
            .hero-header h1 {
                font-size: 2.2em;
            }
            .hero-header .subtitle {
                font-size: 1.1em;
            }
            .container {
                padding: 20px;
            }
            .content-wrapper {
                padding: 25px;
            }
            .activities-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="top-nav">
        <div class="top-nav-content">
            <a href="index.html" class="nav-link">üèñÔ∏è Andaz Peninsula Papagayo</a>
            <a href="nayara.html" class="nav-link active">üåã Nayara Gardens</a>
        </div>
    </div>

    <div class="hero-header">
        <h1>Costa Rica Family Adventure</h1>
        <p class="subtitle">Nayara Gardens ‚Ä¢ La Fortuna, Arenal</p>
    </div>

    <div class="container">
        <div class="content-wrapper">
            <div class="trip-info">
            <h3>Trip Details</h3>
            <p><strong>Duration:</strong> 4 Nights / 5 Days</p>
            <p><strong>Families:</strong> 3 families</p>
            <p><strong>Kids' Interests:</strong> Animals, nature, adventure, volcanoes, hot springs</p>
            <p><strong>Vibe:</strong> Adventure-focused with rainforest wildlife and volcano experiences</p>
            <p style="margin-top: 20px; text-align: center;">
                <a href="#available-activities" class="jump-link" style="color: #10b981; text-decoration: none; font-weight: 600; font-size: 1.1em; display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; border: 2px solid #10b981; border-radius: 25px; transition: all 0.3s ease;">
                    ‚¨áÔ∏è Jump to Activity List
                </a>
            </p>
        </div>

        <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Plan Your Itinerary</h2>

        <div id="itinerary">
            <!-- Day sections will be generated here -->
        </div>

        <button class="print-btn" onclick="window.print()">üìã Print Itinerary</button>

        <h2 id="available-activities" style="text-align: center; margin: 40px 0 20px; color: #2c3e50; scroll-margin-top: 20px;">Available Activities</h2>

        <div class="category-filter">
            <button class="filter-btn active" data-category="all">All Activities</button>
            <button class="filter-btn" data-category="resort">Resort</button>
            <button class="filter-btn" data-category="wildlife">Wildlife</button>
            <button class="filter-btn" data-category="adventure">Adventure</button>
            <button class="filter-btn" data-category="hot-springs">Hot Springs</button>
            <button class="filter-btn" data-category="cultural">Cultural</button>
            <button class="filter-btn" data-category="relaxing">Relaxing</button>
        </div>

        <div class="activities-grid" id="activities-grid">
            <!-- Activity cards will be generated here -->
        </div>
        </div>
    </div>

    <!-- Modal for adding activities -->
    <div id="activity-modal" class="modal">
        <div class="modal-content">
            <!-- Step 1: Select Activity -->
            <div class="modal-step-1">
                <div class="modal-header">
                    <h2>Step 1: Select Activity for <span id="modal-day-title"></span></h2>
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                </div>
                <div class="activities-grid" id="modal-activities-grid">
                    <!-- Activity cards will be cloned here -->
                </div>
            </div>

            <!-- Step 2: Select Participants -->
            <div class="modal-step-2 hidden">
                <div class="modal-header">
                    <h2>Step 2: Who's Participating?</h2>
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                </div>
                <div id="selected-activity-preview"></div>
                <div class="participant-selector">
                    <h3>Who's Participating?</h3>
                    <div style="margin-bottom: 20px;">
                        <button class="participant-btn" id="everyone-btn" onclick="selectEveryone()">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Everyone
                        </button>
                    </div>

                    <div style="text-align: center; margin: 20px 0; color: #6b7280; font-weight: 500;">OR</div>

                    <div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid #d1fae5;">
                        <h4 style="margin-bottom: 15px; color: #047857; font-size: 1.1em;">Specify Count</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: #374151; font-weight: 500;">
                                    üë®‚Äçüë© Adults
                                </label>
                                <input type="number" id="adults-count" min="0" value="0"
                                       style="width: 100%; padding: 12px; border: 2px solid #d1fae5; border-radius: 8px; font-size: 1.1em; text-align: center;"
                                       oninput="updateSpecificCount()">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: #374151; font-weight: 500;">
                                    üëßüë¶ Kids
                                </label>
                                <input type="number" id="kids-count" min="0" value="0"
                                       style="width: 100%; padding: 12px; border: 2px solid #d1fae5; border-radius: 8px; font-size: 1.1em; text-align: center;"
                                       oninput="updateSpecificCount()">
                            </div>
                        </div>
                    </div>

                    <button class="confirm-activity-btn" onclick="confirmActivityWithParticipants()">
                        ‚úì Add to Itinerary
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const activities = [
            {
                id: 1,
                icon: "üå¥",
                title: "Nayara Gardens Resort Activities",
                category: ["resort", "wildlife", "relaxing"],
                description: "Enjoy the resort's spa, gardens with indigenous flora and fauna, multiple pools, and resident sloths living on property. Complimentary daily activities include sloth sanctuary tours, early morning bird-watching walks, and nighttime frog spotting tours.",
                travelTime: "0 min (on-site)",
                ages: "All ages (0+)",
                cost: "Included with stay",
                duration: "Flexible",
                website: "https://nayaragardens.com/",
                destination: null
            },
            {
                id: 2,
                icon: "ü¶•",
                title: "Bogarin Trail - Sloth Watching",
                category: ["wildlife", "relaxing"],
                description: "Easy 2km loop trail with 25+ sloths living in the reserve. Expert guides help spot 4-6 sloths on typical tours. Fully wheelchair accessible, right in La Fortuna town. Perfect relaxed wildlife experience for all fitness levels.",
                travelTime: "15 min drive",
                ages: "All ages (0+)",
                cost: "$20-30 per person guided; $15 self-guided",
                duration: "2 hours",
                website: "https://bogarintrail.com/",
                destination: "Bogarin Trail, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 3,
                icon: "ü¶ã",
                title: "Ecocentro Danaus - Butterfly Garden",
                category: ["wildlife", "relaxing"],
                description: "Small 7-acre nature reserve with butterfly garden (30 species), reptile/frog pond, and easy trails. Day tours great for butterflies and birds; night tours excellent for red-eyed tree frogs and nocturnal wildlife. Easy flat loop perfect for young kids.",
                travelTime: "15-20 min drive",
                ages: "All ages (3+)",
                cost: "$25-35 per person (day); $35-45 (night tour)",
                duration: "1.5-2 hours",
                website: "https://ecoterracostarica.com/",
                destination: "Ecocentro Danaus, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 4,
                icon: "üåâ",
                title: "Mistico Hanging Bridges",
                category: ["wildlife", "adventure"],
                description: "Walk 2 miles through rainforest canopy on 16 suspended bridges with panoramic views of Arenal Volcano. Well-maintained trails easy for little ones. Incredible wildlife spotting including sloths, monkeys, and exotic birds.",
                travelTime: "20 min drive",
                ages: "All ages (3+)",
                cost: "$28 adults, $17 kids (6-11)",
                duration: "2-3 hours",
                website: "https://misticopark.com/",
                destination: "Mistico Arenal Hanging Bridges Park, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 5,
                icon: "üåã",
                title: "Arenal 1968 Park - Lava Trails",
                category: ["adventure", "wildlife"],
                description: "Hike through 1968 lava flows with 360-degree views of Arenal Volcano and Lake Arenal. Two trail options: Lava Flow Trail (1.8 miles) or Forest Trail (3 miles). Walk where lava once flowed and see volcanic rock formations up close.",
                travelTime: "25 min drive",
                ages: "All ages (5+ recommended)",
                cost: "$15-18 per person",
                duration: "2-3 hours",
                website: "https://arenalvolcanopark.com/",
                destination: "Arenal 1968 Park, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 6,
                icon: "ü¶Ö",
                title: "Sky Adventures - Zipline & Tram",
                category: ["adventure", "older-kids"],
                description: "Complete adventure park with ziplines through rainforest canopy, aerial tram, and hanging bridges. Amazing Arenal Volcano and lake views. Very safe for kids - children under 13 must be with adult. Can do just one activity or combo package.",
                travelTime: "20 min drive",
                ages: "5+ (zipline); all ages (tram/bridges)",
                cost: "$50-85 per person (varies by package)",
                duration: "Half day (3-5 hours)",
                website: "https://skyadventures.travel/",
                destination: "Sky Adventures Arenal, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 7,
                icon: "üíß",
                title: "La Fortuna Waterfall",
                category: ["adventure", "relaxing"],
                description: "Stunning 230-foot waterfall with crystal-clear swimming pool. Well-maintained staircase (500 steps down, count them with kids!). Great for cooling off and playing in natural pools. Bring towels and water shoes. Designated rest areas for spotting wildlife.",
                travelTime: "20 min drive",
                ages: "All ages (3+ recommended)",
                cost: "$18 adults, free for kids under 8",
                duration: "2-3 hours",
                website: "https://www.sinac.go.cr/",
                destination: "La Fortuna Waterfall, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 8,
                icon: "üö£",
                title: "White Water Rafting - Balsa River",
                category: ["adventure", "older-kids"],
                description: "Family-friendly rafting with gentle Class II-III rapids perfect for beginners. Safe adventure seeing monkeys, sloths, toucans along riverbanks. Professional guides, safety equipment, lunch included. Multiple families rave about this with young kids.",
                travelTime: "30-40 min drive",
                ages: "5-6+ years (varies by operator)",
                cost: "$65-85 per person",
                duration: "Half day (5 hours total)",
                website: "https://arenalrafting.com/",
                destination: "Balsa River, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 9,
                icon: "üï≥Ô∏è",
                title: "Venado Caves Underground Tour",
                category: ["adventure", "older-kids"],
                description: "Unique cave exploration through tight spaces, rock formations, and underground rivers. Get wet, muddy, and have an adventure! Guides patient with kids. Not for claustrophobic, but thrilling for adventurous families. Helmet and lights provided.",
                travelTime: "45 min drive",
                ages: "5-8+ years (varies by operator)",
                cost: "$70-80 adults, $47-70 kids",
                duration: "Half day (4 hours total)",
                website: "https://cavernasdelvenado.com/",
                destination: "Venado Caves, Venado, Alajuela, Costa Rica"
            },
            {
                id: 10,
                icon: "üèçÔ∏è",
                title: "ATV Quad Bike Adventure",
                category: ["adventure", "older-kids"],
                description: "Ride ATVs through rainforest trails with Arenal Volcano views. Operators offer easier routes for families and non-experienced riders. Kids 5+ can ride with adults; 16+ can drive with license. Muddy, exciting adventure!",
                travelTime: "20-30 min drive",
                ages: "5+ (passenger); 16+ (driver with license)",
                cost: "$100-130 single; $10-30 additional rider",
                duration: "2-3 hours",
                website: "https://paradise-adventures-costa-rica.com/",
                destination: "La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 11,
                icon: "üê¥",
                title: "Horseback Riding to Waterfall",
                category: ["adventure"],
                description: "Gentle 45-minute horseback ride through rainforest to La Fortuna Waterfall area. Horses matched to experience level. Time to swim and relax. Helmets provided. Kids ride their own horse (not with adult).",
                travelTime: "20-30 min drive",
                ages: "7+ years (some operators allow 5+)",
                cost: "$65 adults, $49 kids",
                duration: "4 hours total",
                website: "https://horsebackridingarenal.com/",
                destination: "La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 12,
                icon: "‚ô®Ô∏è",
                title: "Tabacon Hot Springs",
                category: ["hot-springs", "relaxing"],
                description: "Luxurious volcanic hot springs at base of Arenal Volcano with 20+ natural pools (72-105¬∞F). Beautiful gardens, waterfalls, waterslide. Includes welcome drink, towel, locker. Can add meals. Reserve months in advance for peak season!",
                travelTime: "10-15 min drive",
                ages: "All ages (0+); kids 6-11 discounted",
                cost: "$80-99 adults, $55 kids (6-11), free under 6",
                duration: "Half to full day (10am-10pm access)",
                website: "https://tabacon.com/",
                destination: "Tabacon Hot Springs, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 13,
                icon: "üé¢",
                title: "Baldi Hot Springs with Water Slides",
                category: ["hot-springs", "relaxing"],
                description: "Fun hot springs resort with 25 thermal pools PLUS 4 large waterslides. Dedicated Baldi Kids play area with small slides and splash zone. More playful atmosphere than Tabacon. On main road in La Fortuna.",
                travelTime: "10 min drive",
                ages: "All ages (0+)",
                cost: "$36 adults, $25 kids (6-10), free under 5; add $22-33 for meal",
                duration: "Half to full day (10am-10pm)",
                website: "https://baldihotsprings.cr/",
                destination: "Baldi Hot Springs, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 14,
                icon: "üõ∂",
                title: "Kayaking on Lake Arenal",
                category: ["adventure", "older-kids"],
                description: "Paddle Lake Arenal's calm waters with stunning volcano views. Visit small islands, spot birds and wildlife. One or two-person kayaks. Great for families with older kids who can paddle. Beginner-friendly guided tour.",
                travelTime: "30-40 min drive",
                ages: "8-10+ years",
                cost: "$60-75 per person",
                duration: "4 hours total (3 hours on water)",
                website: "https://misticopark.com/",
                destination: "Lake Arenal, Alajuela, Costa Rica"
            },
            {
                id: 15,
                icon: "üç´",
                title: "Rainforest Chocolate Tour",
                category: ["cultural", "relaxing"],
                description: "Hands-on chocolate making from cacao harvest to finished product! Learn history, roast beans, grind seeds, add sugar, taste unlimited chocolate. Very interactive and delicious. Perfect for all ages. Arenal Volcano views from farm.",
                travelTime: "20 min drive",
                ages: "5+ years (free under 5)",
                cost: "$43 adults, $33 kids (6-12), free under 5",
                duration: "1.5 hours",
                website: "https://rainforestchocolatetour.com/",
                destination: "Rainforest Chocolate Tour, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 16,
                icon: "‚òï",
                title: "Don Juan Coffee & Chocolate Farm",
                category: ["cultural", "relaxing"],
                description: "Combined coffee, chocolate, and sugarcane tour. Learn traditional Costa Rican farming, press fresh sugarcane juice, make chocolate, roast coffee beans. More comprehensive than chocolate-only tours. Very family-friendly.",
                travelTime: "25 min drive",
                ages: "All ages (5+)",
                cost: "$35-45 per person",
                duration: "3 hours",
                website: "https://www.donjuantour.com/",
                destination: "Don Juan Coffee Tour, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 17,
                icon: "üíé",
                title: "Rio Celeste Waterfall",
                category: ["adventure", "wildlife"],
                description: "Stunning bright turquoise-blue waterfall created by natural chemical reaction. Moderate 2.5-mile hike through rainforest with 150 steps to viewpoint. Spot sloths, toucans, howler monkeys. One of Costa Rica's most unique natural wonders!",
                travelTime: "90-120 min drive",
                ages: "All ages (5+ recommended)",
                cost: "$12 adults, $5 kids (self-guided) OR $85-110 (guided tour with lunch)",
                duration: "Full day (6-8 hours with travel)",
                website: "https://www.sinac.go.cr/",
                destination: "Rio Celeste Waterfall, Tenorio Volcano National Park, Alajuela, Costa Rica"
            },
            {
                id: 18,
                icon: "üêä",
                title: "Safari Float on Penas Blancas River",
                category: ["wildlife", "relaxing"],
                description: "Gentle floating river tour perfect for young kids. Laid-back wildlife viewing from raft - spot monkeys, birds, crocodiles, iguanas, sloths. No rapids, very safe. Great intro to Costa Rican wildlife for families.",
                travelTime: "45 min drive",
                ages: "3+ years",
                cost: "$60-75 per person",
                duration: "Half day (4 hours)",
                website: "https://www.costaricadescents.com/",
                destination: "Penas Blancas River, Alajuela, Costa Rica"
            },
            {
                id: 19,
                icon: "üå≤",
                title: "Arenal Observatory Lodge Trails",
                category: ["wildlife", "adventure"],
                description: "Extensive 7-mile trail system through 870-acre rainforest reserve with volcano views. Day pass includes guided naturalist walk. Trails to waterfalls and hanging bridge. 500+ bird species recorded. Universal accessible path available.",
                travelTime: "30 min drive",
                ages: "All ages (4+)",
                cost: "$20-25 day pass with guided walk",
                duration: "Half to full day",
                website: "https://www.arenalobservatorylodge.com/",
                destination: "Arenal Observatory Lodge, La Fortuna, Alajuela, Costa Rica"
            },
            {
                id: 20,
                icon: "üé™",
                title: "Arenal Mundo Aventura Park",
                category: ["adventure", "wildlife"],
                description: "Adventure park offering multiple activities: canopy tour, horseback riding, waterfall hikes, hanging bridges. Can customize your day with a la carte activities or package deals. Good option for families wanting variety in one location.",
                travelTime: "25 min drive",
                ages: "Varies by activity (most 5+)",
                cost: "$40-80 per person (varies by activities)",
                duration: "Half to full day",
                website: "https://www.arenalmundoaventura.com/",
                destination: "Arenal Mundo Aventura, La Fortuna, Alajuela, Costa Rica"
            }
        ];

        let itinerary = {
            day1: [],
            day2: [],
            day3: [],
            day4: []
        };

        let currentDay = null;
        let selectedActivityId = null;
        let participantMode = null; // 'everyone' or 'specific'

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderItinerary();
            renderActivities();
            setupFilters();
            loadItinerary();
        });

        function renderItinerary() {
            const itineraryDiv = document.getElementById('itinerary');
            itineraryDiv.innerHTML = '';

            for (let i = 1; i <= 4; i++) {
                const dayKey = `day${i}`;
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day-section';
                dayDiv.innerHTML = `
                    <div class="day-header">
                        <h3 class="day-title">Day ${i}</h3>
                        <button class="add-activity-btn" onclick="openModal('${dayKey}')">+ Add Activity</button>
                    </div>
                    <div class="day-activities" id="${dayKey}">
                        ${itinerary[dayKey].length === 0 ? '<p class="empty-day">No activities planned yet. Click "Add Activity" to get started!</p>' : ''}
                    </div>
                `;
                itineraryDiv.appendChild(dayDiv);

                // Render selected activities for this day
                renderDayActivities(dayKey);
            }
        }

        function renderDayActivities(dayKey) {
            const dayDiv = document.getElementById(dayKey);
            if (!dayDiv) return;

            if (itinerary[dayKey].length === 0) {
                dayDiv.innerHTML = '<p class="empty-day">No activities planned yet. Click "Add Activity" to get started!</p>';
                return;
            }

            dayDiv.innerHTML = '';
            itinerary[dayKey].forEach((item, index) => {
                // Support both old format (just ID) and new format (object with participants)
                const activityId = typeof item === 'object' ? item.activityId : item;
                const participants = typeof item === 'object' ? item.participants : null;

                const activity = activities.find(a => a.id === activityId);
                if (!activity) return;

                // Generate participant badges
                let participantHTML = '';
                if (participants) {
                    participantHTML = '<div class="participants-display">';

                    // Handle new format: 'everyone' or {adults, kids}
                    if (participants === 'everyone') {
                        participantHTML += '<span class="participant-badge participant-all">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Everyone</span>';
                    } else if (typeof participants === 'object' && !Array.isArray(participants)) {
                        // New format: {adults: X, kids: Y}
                        const adults = participants.adults || 0;
                        const kids = participants.kids || 0;
                        if (adults > 0 || kids > 0) {
                            let label = [];
                            if (adults > 0) label.push(`${adults} adult${adults > 1 ? 's' : ''}`);
                            if (kids > 0) label.push(`${kids} kid${kids > 1 ? 's' : ''}`);
                            participantHTML += `<span class="participant-badge participant-custom">üë• ${label.join(' + ')}</span>`;
                        }
                    } else if (Array.isArray(participants)) {
                        // Old format: array of participant types (backwards compatibility)
                        const oldLabels = {
                            'all': 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ All Families',
                            'older-kids': 'üßí Older Kids (8-9) + Adults',
                            'younger-kids': 'üë∂ Younger Kids (5) + Adults',
                            'adults-only': 'üë®‚Äçüë© Adults Only',
                            'split-groups': 'üîÄ Split Groups'
                        };
                        participants.forEach(p => {
                            const cssClass = oldLabels[p] ? `participant-${p}` : 'participant-custom';
                            const label = oldLabels[p] || p;
                            participantHTML += `<span class="participant-badge ${cssClass}">${label}</span>`;
                        });
                    }
                    participantHTML += '</div>';
                }

                const mapsUrl = activity.destination
                    ? `https://www.google.com/maps/dir/?api=1&origin=Nayara+Gardens+La+Fortuna&destination=${encodeURIComponent(activity.destination)}`
                    : null;

                const linksHTML = (activity.website || mapsUrl)
                    ? `<p style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 12px;">
                         ${activity.website ? `<a href="${activity.website}" target="_blank" rel="noopener noreferrer"
                            style="color: #10b981; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                           üîó Website
                         </a>` : ''}
                         ${mapsUrl ? `<a href="${mapsUrl}" target="_blank" rel="noopener noreferrer"
                            style="color: #3b82f6; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                           üìç Directions
                         </a>` : ''}
                       </p>`
                    : '';

                const activityDiv = document.createElement('div');
                activityDiv.className = 'selected-activity';
                activityDiv.innerHTML = `
                    <button class="remove-btn" onclick="removeActivity('${dayKey}', ${index})">Remove</button>
                    <h4>${activity.icon} ${activity.title}</h4>
                    ${participantHTML}
                    <p><strong>Travel Time:</strong> ${activity.travelTime} | <strong>Duration:</strong> ${activity.duration}</p>
                    <p><strong>Ages:</strong> ${activity.ages} | <strong>Cost:</strong> ${activity.cost}</p>
                    <p style="margin-top: 10px;">${activity.description}</p>
                    ${linksHTML}
                `;
                dayDiv.appendChild(activityDiv);
            });
        }

        function renderActivities(category = 'all') {
            const grid = document.getElementById('activities-grid');
            grid.innerHTML = '';

            const filtered = category === 'all'
                ? activities
                : activities.filter(a => a.category.includes(category));

            filtered.forEach(activity => {
                const card = createActivityCard(activity);
                grid.appendChild(card);
            });
        }

        function createActivityCard(activity) {
            const card = document.createElement('div');
            card.className = 'activity-card';

            const tags = activity.category.map(cat =>
                `<span class="activity-tag tag-${cat}">${cat}</span>`
            ).join(' ');

            const mapsUrl = activity.destination
                ? `https://www.google.com/maps/dir/?api=1&origin=Nayara+Gardens+La+Fortuna&destination=${encodeURIComponent(activity.destination)}`
                : null;

            const linksHTML = (activity.website || mapsUrl)
                ? `<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb; display: flex; flex-wrap: wrap; gap: 12px;">
                     ${activity.website ? `<a href="${activity.website}" target="_blank" rel="noopener noreferrer"
                        style="color: #10b981; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;"
                        onclick="event.stopPropagation();">
                       üîó Website
                     </a>` : ''}
                     ${mapsUrl ? `<a href="${mapsUrl}" target="_blank" rel="noopener noreferrer"
                        style="color: #3b82f6; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;"
                        onclick="event.stopPropagation();">
                       üìç Directions
                     </a>` : ''}
                   </div>`
                : '';

            card.innerHTML = `
                <div class="activity-icon">${activity.icon}</div>
                ${tags}
                <div class="activity-title">${activity.title}</div>
                <div class="activity-description">${activity.description}</div>
                <div class="activity-details">
                    <div class="detail-item">
                        <div class="detail-label">üöó Travel Time:</div>
                        <div class="detail-value">${activity.travelTime}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ages:</div>
                        <div class="detail-value">${activity.ages}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üíµ Cost:</div>
                        <div class="detail-value">${activity.cost}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">‚è±Ô∏è Duration:</div>
                        <div class="detail-value">${activity.duration}</div>
                    </div>
                </div>
                ${linksHTML}
            `;

            return card;
        }

        function setupFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.dataset.category;
                    renderActivities(category);
                });
            });
        }

        function openModal(dayKey) {
            currentDay = dayKey;
            selectedActivityId = null;
            participantMode = null;

            document.getElementById('modal-day-title').textContent = dayKey.replace('day', 'Day ');

            // Show step 1, hide step 2
            document.querySelector('.modal-step-1').classList.remove('hidden');
            document.querySelector('.modal-step-2').classList.add('hidden');

            const modalGrid = document.getElementById('modal-activities-grid');
            modalGrid.innerHTML = '';

            activities.forEach(activity => {
                const card = createActivityCard(activity);
                card.addEventListener('click', function() {
                    selectActivity(activity.id);
                });
                modalGrid.appendChild(card);
            });

            document.getElementById('activity-modal').style.display = 'block';
        }

        function selectActivity(activityId) {
            selectedActivityId = activityId;
            showParticipantSelector();
        }

        function showParticipantSelector() {
            const activity = activities.find(a => a.id === selectedActivityId);
            if (!activity) return;

            // Hide step 1, show step 2
            document.querySelector('.modal-step-1').classList.add('hidden');
            document.querySelector('.modal-step-2').classList.remove('hidden');

            // Show activity preview
            const preview = document.getElementById('selected-activity-preview');
            preview.innerHTML = `
                <div style="background: #f0fdf4; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #10b981;">
                    <h3 style="color: #047857; margin-bottom: 10px;">${activity.icon} ${activity.title}</h3>
                    <p style="color: #059669; font-size: 0.95em;">${activity.description}</p>
                </div>
            `;

            // Reset participant selection
            participantMode = null;
            document.getElementById('everyone-btn').classList.remove('selected');
            document.getElementById('adults-count').value = 0;
            document.getElementById('kids-count').value = 0;
        }

        function selectEveryone() {
            const btn = document.getElementById('everyone-btn');
            btn.classList.add('selected');
            participantMode = 'everyone';

            // Reset count inputs
            document.getElementById('adults-count').value = 0;
            document.getElementById('kids-count').value = 0;
        }

        function updateSpecificCount() {
            const adults = parseInt(document.getElementById('adults-count').value) || 0;
            const kids = parseInt(document.getElementById('kids-count').value) || 0;

            if (adults > 0 || kids > 0) {
                participantMode = 'specific';
                document.getElementById('everyone-btn').classList.remove('selected');
            } else {
                participantMode = null;
            }
        }

        function confirmActivityWithParticipants() {
            let participants = null;

            if (participantMode === 'everyone') {
                participants = 'everyone';
            } else if (participantMode === 'specific') {
                const adults = parseInt(document.getElementById('adults-count').value) || 0;
                const kids = parseInt(document.getElementById('kids-count').value) || 0;
                participants = { adults, kids };
            }

            // Add activity with participants
            if (selectedActivityId && currentDay) {
                addActivityToDay(currentDay, selectedActivityId, participants);
                closeModal();
            }
        }

        function closeModal() {
            document.getElementById('activity-modal').style.display = 'none';
            currentDay = null;
            selectedActivityId = null;
            participantMode = null;
        }

        function addActivityToDay(dayKey, activityId, participants = null) {
            // Check if activity already exists (comparing just the activity ID)
            const exists = itinerary[dayKey].some(item => {
                const id = typeof item === 'object' ? item.activityId : item;
                return id === activityId;
            });

            if (!exists) {
                itinerary[dayKey].push({
                    activityId: activityId,
                    participants: participants
                });
                renderDayActivities(dayKey);
                saveItinerary();
            }
        }

        function removeActivity(dayKey, index) {
            itinerary[dayKey].splice(index, 1);
            renderDayActivities(dayKey);
            saveItinerary();
        }

        function saveItinerary() {
            localStorage.setItem('nayaraItinerary', JSON.stringify(itinerary));
        }

        function loadItinerary() {
            const saved = localStorage.getItem('nayaraItinerary');
            if (saved) {
                itinerary = JSON.parse(saved);
                renderItinerary();
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('activity-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
