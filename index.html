<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Costa Rica Family Trip Planner - Andaz Peninsula Papagayo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f9b8e 0%, #1e5f5a 50%, #2b3e50 100%);
            background-attachment: fixed;
            color: #333;
            line-height: 1.6;
            padding: 0;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .hero-header {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%);
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .hero-header::before {
            content: "üå¥ ü¶ú üå∫ üêí üåä ‚òÄÔ∏è ü¶ã üå¥ ü¶ú üå∫ üêí üåä ‚òÄÔ∏è ü¶ã";
            position: absolute;
            top: 10px;
            left: 0;
            width: 200%;
            font-size: 1.5em;
            opacity: 0.3;
            animation: scroll 30s linear infinite;
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .hero-header h1 {
            font-family: 'Playfair Display', serif;
            color: white;
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .hero-header .subtitle {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.4em;
            font-weight: 300;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 50px;
            position: relative;
            z-index: 1;
        }

        .content-wrapper {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            margin-top: -40px;
            position: relative;
            z-index: 2;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        h2 {
            font-family: 'Playfair Display', serif;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .trip-info {
            background: linear-gradient(135deg, #d4f1e8 0%, #e8f5e9 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            border-left: 6px solid #10b981;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.15);
        }

        .trip-info h3 {
            color: #047857;
            margin-bottom: 15px;
            font-size: 1.5em;
            font-weight: 600;
        }

        .trip-info p {
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .activity-card {
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 25px;
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .activity-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.25);
            border-color: #10b981;
        }

        .activity-card.selected {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .activity-tag {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tag-resort { background: #e3f2fd; color: #1976d2; }
        .tag-adventure { background: #fff3e0; color: #f57c00; }
        .tag-beach { background: #e0f2f1; color: #00897b; }
        .tag-wildlife { background: #f3e5f5; color: #7b1fa2; }
        .tag-older-kids { background: #ffebee; color: #c62828; }
        .tag-relaxing { background: #e8f5e9; color: #388e3c; }

        .activity-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .activity-description {
            color: #555;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .activity-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .detail-item {
            font-size: 0.9em;
        }

        .detail-label {
            font-weight: bold;
            color: #666;
        }

        .detail-value {
            color: #333;
        }

        .day-section {
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f0fdf4 0%, #f9fafb 100%);
            border-radius: 20px;
            border: 3px solid #d1fae5;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .day-section:hover {
            border-color: #10b981;
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.15);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .day-title {
            font-size: 1.8em;
            color: #047857;
            font-family: 'Playfair Display', serif;
        }

        .day-activities {
            min-height: 100px;
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .selected-activity {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4caf50;
        }

        .selected-activity h4 {
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            float: right;
            font-size: 0.85em;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        .add-activity-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
        }

        .add-activity-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .category-filter {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 12px 24px;
            border: 2px solid #d1fae5;
            background: white;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .filter-btn:hover {
            border-color: #10b981;
            color: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.35);
        }

        .print-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            display: block;
            margin: 40px auto;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
            transition: all 0.3s ease;
        }

        .print-btn:hover {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.4);
        }

        .empty-day {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            font-size: 2em;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        .participant-selector {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 2px solid #e5e7eb;
        }

        .participant-selector h3 {
            color: #047857;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .participant-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .participant-btn {
            padding: 10px 20px;
            border: 2px solid #d1fae5;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
        }

        .participant-btn:hover {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .participant-btn.selected {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .participant-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 6px;
            margin-bottom: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .participant-all { background: #dbeafe; color: #1e40af; }
        .participant-older-kids { background: #fce7f3; color: #be185d; }
        .participant-younger-kids { background: #fef3c7; color: #d97706; }
        .participant-adults-only { background: #e0e7ff; color: #4338ca; }
        .participant-split-groups { background: #f3e8ff; color: #7c3aed; }
        .participant-custom { background: #e5e7eb; color: #374151; }

        .participants-display {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e5e7eb;
        }

        .confirm-activity-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 600;
            width: 100%;
            margin-top: 15px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
        }

        .confirm-activity-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .confirm-activity-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .modal-step-1, .modal-step-2 {
            transition: all 0.3s ease;
        }

        .modal-step-1.hidden, .modal-step-2.hidden {
            display: none;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .add-activity-btn, .remove-btn, .print-btn, .filter-btn {
                display: none;
            }
        }

        .activity-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
            text-align: center;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        @media (max-width: 768px) {
            .hero-header h1 {
                font-size: 2.2em;
            }
            .hero-header .subtitle {
                font-size: 1.1em;
            }
            .container {
                padding: 20px;
            }
            .content-wrapper {
                padding: 25px;
            }
            .activities-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="hero-header">
        <h1>Costa Rica Family Adventure</h1>
        <p class="subtitle">Andaz Peninsula Papagayo Resort ‚Ä¢ June 2026</p>
    </div>

    <div class="container">
        <div class="content-wrapper">
            <div class="trip-info">
            <h3>Trip Details</h3>
            <p><strong>Duration:</strong> 5 Nights / 6 Days</p>
            <p><strong>Families:</strong> 3 families</p>
            <p><strong>Kids' Interests:</strong> Animals, beaches, swimming, nature, forests</p>
            <p><strong>Vibe:</strong> Relaxed pace with mix of adventure and downtime</p>
        </div>

        <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Plan Your Itinerary</h2>

        <div id="itinerary">
            <!-- Day sections will be generated here -->
        </div>

        <button class="print-btn" onclick="window.print()">üìã Print Itinerary</button>

        <h2 style="text-align: center; margin: 40px 0 20px; color: #2c3e50;">Available Activities</h2>

        <div class="category-filter">
            <button class="filter-btn active" data-category="all">All Activities</button>
            <button class="filter-btn" data-category="resort">Resort</button>
            <button class="filter-btn" data-category="beach">Beach</button>
            <button class="filter-btn" data-category="adventure">Adventure</button>
            <button class="filter-btn" data-category="wildlife">Wildlife</button>
            <button class="filter-btn" data-category="older-kids">Older Kids</button>
            <button class="filter-btn" data-category="relaxing">Relaxing</button>
        </div>

        <div class="activities-grid" id="activities-grid">
            <!-- Activity cards will be generated here -->
        </div>
        </div>
    </div>

    <!-- Modal for adding activities -->
    <div id="activity-modal" class="modal">
        <div class="modal-content">
            <!-- Step 1: Select Activity -->
            <div class="modal-step-1">
                <div class="modal-header">
                    <h2>Step 1: Select Activity for <span id="modal-day-title"></span></h2>
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                </div>
                <div class="activities-grid" id="modal-activities-grid">
                    <!-- Activity cards will be cloned here -->
                </div>
            </div>

            <!-- Step 2: Select Participants -->
            <div class="modal-step-2 hidden">
                <div class="modal-header">
                    <h2>Step 2: Who's Participating?</h2>
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                </div>
                <div id="selected-activity-preview"></div>
                <div class="participant-selector">
                    <h3>Who's Participating?</h3>
                    <div style="margin-bottom: 20px;">
                        <button class="participant-btn" id="everyone-btn" onclick="selectEveryone()">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Everyone
                        </button>
                    </div>

                    <div style="text-align: center; margin: 20px 0; color: #6b7280; font-weight: 500;">OR</div>

                    <div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid #d1fae5;">
                        <h4 style="margin-bottom: 15px; color: #047857; font-size: 1.1em;">Specify Count</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: #374151; font-weight: 500;">
                                    üë®‚Äçüë© Adults
                                </label>
                                <input type="number" id="adults-count" min="0" value="0"
                                       style="width: 100%; padding: 12px; border: 2px solid #d1fae5; border-radius: 8px; font-size: 1.1em; text-align: center;"
                                       oninput="updateSpecificCount()">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: #374151; font-weight: 500;">
                                    üëßüë¶ Kids
                                </label>
                                <input type="number" id="kids-count" min="0" value="0"
                                       style="width: 100%; padding: 12px; border: 2px solid #d1fae5; border-radius: 8px; font-size: 1.1em; text-align: center;"
                                       oninput="updateSpecificCount()">
                            </div>
                        </div>
                    </div>

                    <button class="confirm-activity-btn" onclick="confirmActivityWithParticipants()">
                        ‚úì Add to Itinerary
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const activities = [
            {
                id: 1,
                icon: "üèñÔ∏è",
                title: "Resort Beach Day",
                category: ["resort", "beach", "relaxing"],
                description: "Enjoy the three pristine beaches at the resort in Culebra Bay. Very calm waters ideal for young children. Complimentary kayaks, snorkeling equipment, stand-up paddleboards, and beach games available at Casa de Playa beach club.",
                travelTime: "0 min (on-site)",
                ages: "All ages (0+)",
                cost: "Free (included)",
                duration: "Full day",
                website: "https://www.hyatt.com/andaz/ptyan-andaz-costa-rica-resort-at-peninsula-papagayo"
            },
            {
                id: 2,
                icon: "üé®",
                title: "Cambi Kids' Club",
                category: ["resort", "relaxing"],
                description: "Complimentary kids' club for ages 4-12 with storytelling, arts and crafts, games, and making new friends. Indoor and outdoor play areas with spectacular views. Great for giving parents some alone time!",
                travelTime: "0 min (on-site)",
                ages: "4-12 years",
                cost: "Free (included)",
                duration: "Flexible (hourly)",
                website: "https://www.hyatt.com/andaz/ptyan-andaz-costa-rica-resort-at-peninsula-papagayo"
            },
            {
                id: 3,
                icon: "üî¨",
                title: "Papagayo Explorers Program",
                category: ["resort", "wildlife"],
                description: "Join experts in discovering Costa Rica's natural wonders through hands-on experiences. Mini Explorers learn about the micro world and Peninsula Papagayo ecosystems. Educational and fun!",
                travelTime: "0 min (on-site)",
                ages: "All ages (5+)",
                cost: "Included/Nominal fee",
                duration: "2-3 hours",
                website: "https://www.hyatt.com/andaz/ptyan-andaz-costa-rica-resort-at-peninsula-papagayo"
            },
            {
                id: 4,
                icon: "üåã",
                title: "Rinc√≥n de la Vieja National Park",
                category: ["adventure", "wildlife"],
                description: "Hike scenic trails to waterfalls, see boiling mud pots and fumaroles on the Las Pailas Trail. Spot monkeys, exotic birds, and wildlife. Easy family-friendly trails with minimal elevation. Park includes hot springs access at nearby resorts.",
                travelTime: "45-60 min drive",
                ages: "All ages (recommended 5+)",
                cost: "$16 adults, $6 kids (2-12) + $30-125 for guided tour with hot springs",
                duration: "Full day (6-8 hours)",
                website: "https://www.sinac.go.cr/"
            },
            {
                id: 5,
                icon: "üí¶",
                title: "Hot Springs & Mud Baths",
                category: ["adventure", "relaxing"],
                description: "Soak in natural hot springs and enjoy volcanic mud baths at Hotel Hacienda Guachipel√≠n near Rinc√≥n de la Vieja. Day passes include hot springs, mud baths, and nature trails. Can combine with volcano park visit.",
                travelTime: "50 min drive",
                ages: "All ages (5+)",
                cost: "$30 adults, $25 kids",
                duration: "Half day (3-4 hours)",
                website: "https://www.guachipelin.com/"
            },
            {
                id: 6,
                icon: "‚õµ",
                title: "Catamaran Snorkeling Tour",
                category: ["beach", "wildlife"],
                description: "Sail the Gulf of Papagayo on a catamaran with snorkeling stops. See dolphins, whales, sea turtles, and colorful fish. Includes lunch, drinks, snorkeling gear, and life vests. Morning or sunset tours available.",
                travelTime: "Pickup from resort",
                ages: "All ages (3+)",
                cost: "$70-95 per person (group), $869-1174 private boat",
                duration: "4 hours",
                website: "https://www.papagayotours.com/"
            },
            {
                id: 7,
                icon: "üêÜ",
                title: "Ponderosa Safari & Adventure Park",
                category: ["wildlife", "adventure"],
                description: "Safari tour where you can feed zebras, giraffes, and African cattle! Also offers waterfall visits, ziplines, kayaking, and horseback riding. Located just outside Liberia. A unique Costa Rican safari experience.",
                travelTime: "35-45 min drive",
                ages: "All ages (safari), 8+ (zipline)",
                cost: "$50-80 per person (varies by activities)",
                duration: "Half to full day",
                website: "https://ponderosaadventurepark.com/"
            },
            {
                id: 8,
                icon: "üêí",
                title: "Las Pumas Rescue Center",
                category: ["wildlife"],
                description: "Wildlife rehabilitation center where kids can see rescued rainforest animals and birds up close. Educational experience supporting animal conservation. See jaguars, pumas, monkeys, and exotic birds.",
                travelTime: "30 min drive",
                ages: "All ages (3+)",
                cost: "$15-25 per person",
                duration: "2-3 hours"
            },
            {
                id: 9,
                icon: "üåä",
                title: "Beach Hopping: Conchal & Tamarindo",
                category: ["beach", "relaxing"],
                description: "Visit Playa Conchal (famous for shell-sand beach) and Tamarindo (surf town with shops and restaurants). Private tour with bilingual guide, fruits & water. Customize the day at your own pace. Great for beach variety!",
                travelTime: "20-35 min to beaches",
                ages: "All ages (0+)",
                cost: "$60-100 per person for guided tour, or drive yourself",
                duration: "Full day (6-8 hours)"
            },
            {
                id: 10,
                icon: "üèÑ",
                title: "Surf Lessons in Tamarindo",
                category: ["adventure", "beach", "older-kids"],
                description: "Beginner-friendly surf lessons at Tamarindo Beach. Gentle waves and sandy bottom make it perfect for kids and families learning to surf. Professional instructors provide boards and instruction.",
                travelTime: "35 min drive",
                ages: "8+ recommended",
                cost: "$70 per person",
                duration: "2-3 hours"
            },
            {
                id: 11,
                icon: "üêä",
                title: "Palo Verde National Park Boat Safari",
                category: ["wildlife", "adventure"],
                description: "Boat safari on the Tempisque River to spot howler monkeys, capuchin monkeys, crocodiles, iguanas, and exotic birds. 20-meter boardwalk at Laguna Palo Verde for wildlife viewing. Amazing birdwatching!",
                travelTime: "50-60 min drive",
                ages: "All ages (4+)",
                cost: "$50-75 per person",
                duration: "Half day (4-5 hours)"
            },
            {
                id: 12,
                icon: "üíß",
                title: "Llanos de Cortez Waterfall",
                category: ["adventure", "relaxing"],
                description: "Beautiful, easily accessible waterfall perfect for families. Short walk to a wide waterfall with a natural swimming pool. Great for cooling off and playing in the water. Less crowded than other waterfalls.",
                travelTime: "40 min drive",
                ages: "All ages (3+)",
                cost: "$5 entrance fee",
                duration: "2-4 hours"
            },
            {
                id: 13,
                icon: "üê¥",
                title: "Horseback Riding on the Beach",
                category: ["adventure", "beach"],
                description: "Horseback ride along the beach and through coastal trails. Suitable for beginners with gentle horses. Experience includes riding through forests and along the shoreline. Magical sunset rides available.",
                travelTime: "20-30 min drive",
                ages: "8+ years",
                cost: "$60-80 per person",
                duration: "2-3 hours"
            },
            {
                id: 14,
                icon: "üé£",
                title: "Resort Pool & Activities Day",
                category: ["resort", "relaxing"],
                description: "Relaxing day at the resort's beautiful pools with poolside service. Let the kids swim while adults relax with a book. Take advantage of resort amenities, spa, and restaurants. Perfect rest day between adventures!",
                travelTime: "0 min (on-site)",
                ages: "All ages (0+)",
                cost: "Free (included)",
                duration: "Full day"
            },
            {
                id: 15,
                icon: "üå≤",
                title: "Papagayo Nature Center",
                category: ["wildlife", "resort"],
                description: "Guided nature walk where a naturalist shows native 'critters' and teaches about local ecosystems. Highly rated by families as a trip highlight. Educational and interactive experience right near the resort.",
                travelTime: "10-15 min drive",
                ages: "All ages (5+)",
                cost: "$30-50 per person",
                duration: "2-3 hours"
            },
            {
                id: 16,
                icon: "üçΩÔ∏è",
                title: "Restaurant Day in Tamarindo",
                category: ["beach", "relaxing"],
                description: "Explore the surf town of Tamarindo with its beach shops, restaurants, and laid-back vibe. Try local cuisine, walk the beach, and enjoy the town atmosphere. Great for a casual, unstructured day.",
                travelTime: "35 min drive",
                ages: "All ages (0+)",
                cost: "Meals only (budget-friendly to upscale)",
                duration: "Half to full day"
            },
            {
                id: 17,
                icon: "üåÖ",
                title: "Sunset Catamaran Cruise",
                category: ["beach", "relaxing"],
                description: "Evening catamaran sail to watch the spectacular Costa Rican sunset. More relaxed than the snorkeling version. Includes drinks, snacks, and music. Romantic option while kids can still enjoy the boat ride.",
                travelTime: "Pickup from resort",
                ages: "All ages (0+)",
                cost: "$70-95 per person",
                duration: "3-4 hours (late afternoon)"
            },
            {
                id: 18,
                icon: "üèä",
                title: "Private Beach Day with Setup",
                category: ["beach", "relaxing"],
                description: "Resort can arrange a private beach setup with umbrellas, chairs, coolers, and water toys at one of the secluded beaches. Have a private family beach day without crowds. Staff can bring lunch and drinks.",
                travelTime: "0-5 min (on-site)",
                ages: "All ages (0+)",
                cost: "$100-200 setup fee",
                duration: "Full day"
            },
            {
                id: 19,
                icon: "üíé",
                title: "Rio Celeste Waterfall - Tenorio Volcano",
                category: ["adventure", "wildlife"],
                description: "Stunning turquoise blue waterfall in Tenorio Volcano National Park. The vibrant color is created by a natural chemical reaction! Moderate 4km hike through rainforest with 150 steps to viewpoint. Spot sloths, toucans, and howler monkeys along the trail. A must-see natural wonder!",
                travelTime: "90-120 min drive",
                ages: "All ages (5+ recommended)",
                cost: "$12 adults, $5 kids (self-guided) or $85-110 per person (guided tour with lunch)",
                duration: "Full day (6-8 hours)",
                website: "https://www.sinac.go.cr/"
            },
            {
                id: 20,
                icon: "ü¶Ö",
                title: "Congo Trail Canopy Zipline",
                category: ["adventure", "older-kids"],
                description: "Guanacaste's most famous zipline canopy tour! Fly through the rainforest on 11 platforms and cross 3 hanging bridges. Suitable for kids 3+ with parent. See monkeys and exotic birds from the treetops. Option for Tarzan swing and Superman ziplines for thrill-seekers. Animal rescue center on-site!",
                travelTime: "35-45 min drive",
                ages: "3+ years (with parent)",
                cost: "$60-70 per person",
                duration: "Half day (3-4 hours)",
                website: "https://www.congocanopy.com/"
            },
            {
                id: 21,
                icon: "üé¢",
                title: "Diamante Eco Adventure Park",
                category: ["adventure", "wildlife", "beach"],
                description: "Ultimate adventure park with ziplines (longest dual-line in Costa Rica!), animal sanctuary, cultural farm tour, jungle obstacle course, and beach access. Something for everyone! Kids playground for younger ones. Buffet lunch included with Adventure Pass. Ocean views while ziplining!",
                travelTime: "40-50 min drive",
                ages: "All ages (5+ for zipline)",
                cost: "$63-78 per person (varies by age and package)",
                duration: "Full day (6-8 hours)",
                website: "https://diamanteecoadventurepark.com/"
            },
            {
                id: 22,
                icon: "üåø",
                title: "Monteverde Cloud Forest Day Trip",
                category: ["wildlife", "adventure"],
                description: "Visit Costa Rica's famous misty cloud forest ecosystem! Walk 1.9 miles of hanging bridges through the canopy. See colorful butterflies, hummingbirds, and over 30 species of reptiles and amphibians. Learn about unique cloud forest plants. Includes breakfast, lunch, and round-trip transport. Magical experience!",
                travelTime: "3 hours drive",
                ages: "5+ years",
                cost: "$95-120 per person (full day tour with meals)",
                duration: "Full day (12 hours with travel)",
                website: "https://monteverdetourscr.com/"
            },
            {
                id: 23,
                icon: "‚òï",
                title: "Coffee & Chocolate Farm Tour - Playas del Coco",
                category: ["wildlife", "relaxing"],
                description: "Family-run coffee roasting experience at Big Fingers Coffee Roaster. Learn the journey from bean to cup! Roast your own coffee beans, grind cacao by hand, make traditional Costa Rican chocolate, and enjoy tastings. Interactive and educational for all ages. Perfect introduction to Costa Rican coffee culture.",
                travelTime: "25-30 min drive",
                ages: "All ages (4+)",
                cost: "$38-40 per person",
                duration: "2 hours",
                website: "https://cafetioleo.com/"
            },
            {
                id: 24,
                icon: "üç´",
                title: "Caf√© Tio Leo Cultural Farm Experience",
                category: ["wildlife", "relaxing"],
                description: "Authentic farm tour in Guardia de Liberia! Walk through coffee, cacao, and sugarcane plantations. Press fresh sugarcane juice, learn traditional chocolate-making techniques, and make empanadas from scratch. Hear stories about Costa Rican farming traditions. Hands-on, cultural, and delicious!",
                travelTime: "15-20 min drive",
                ages: "All ages (5+)",
                cost: "$35-45 per person",
                duration: "3-4 hours",
                website: "https://cafetioleo.com/"
            },
            {
                id: 25,
                icon: "ü´ì",
                title: "Guachipelin Farm-to-Table Cooking Class",
                category: ["relaxing"],
                description: "Learn traditional Guanacaste cooking with trained local chefs! Make corn tortillas from scratch, prepare authentic Costa Rican dishes, and learn about homesteading. Pick fresh herbs from the greenhouse, and enjoy the meal you created together. Can combine with hot springs visit!",
                travelTime: "50 min drive",
                ages: "All ages (6+)",
                cost: "$45-65 per person",
                duration: "3 hours (cooking class only)",
                website: "https://www.guachipelin.com/"
            },
            {
                id: 26,
                icon: "üå±",
                title: "Don Jorge Agro-Eco Farm Tour",
                category: ["wildlife", "relaxing"],
                description: "Visit a 100% family-owned Costa Rican farm! Learn about cacao and coffee cultivation through generations. Pick coffee cherries (when in season), ride a traditional ox-cart, and make your own chocolate to take home. Visit the family home for fresh lemonade and coffee. Authentic rural experience!",
                travelTime: "30-40 min drive",
                ages: "All ages (5+)",
                cost: "$30-40 per person",
                duration: "2-3 hours",
                website: "https://www.chocolateandcoffeefarmtourdonjorge.com/"
            }
        ];

        let itinerary = {
            day1: [],
            day2: [],
            day3: [],
            day4: [],
            day5: []
        };

        let currentDay = null;
        let selectedActivityId = null;
        let participantMode = null; // 'everyone' or 'specific'

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderItinerary();
            renderActivities();
            setupFilters();
            loadItinerary();
        });

        function renderItinerary() {
            const itineraryDiv = document.getElementById('itinerary');
            itineraryDiv.innerHTML = '';

            for (let i = 1; i <= 5; i++) {
                const dayKey = `day${i}`;
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day-section';
                dayDiv.innerHTML = `
                    <div class="day-header">
                        <h3 class="day-title">Day ${i}</h3>
                        <button class="add-activity-btn" onclick="openModal('${dayKey}')">+ Add Activity</button>
                    </div>
                    <div class="day-activities" id="${dayKey}">
                        ${itinerary[dayKey].length === 0 ? '<p class="empty-day">No activities planned yet. Click "Add Activity" to get started!</p>' : ''}
                    </div>
                `;
                itineraryDiv.appendChild(dayDiv);

                // Render selected activities for this day
                renderDayActivities(dayKey);
            }
        }

        function renderDayActivities(dayKey) {
            const dayDiv = document.getElementById(dayKey);
            if (!dayDiv) return;

            if (itinerary[dayKey].length === 0) {
                dayDiv.innerHTML = '<p class="empty-day">No activities planned yet. Click "Add Activity" to get started!</p>';
                return;
            }

            dayDiv.innerHTML = '';
            itinerary[dayKey].forEach((item, index) => {
                // Support both old format (just ID) and new format (object with participants)
                const activityId = typeof item === 'object' ? item.activityId : item;
                const participants = typeof item === 'object' ? item.participants : null;

                const activity = activities.find(a => a.id === activityId);
                if (!activity) return;

                // Generate participant badges
                let participantHTML = '';
                if (participants) {
                    participantHTML = '<div class="participants-display">';

                    // Handle new format: 'everyone' or {adults, kids}
                    if (participants === 'everyone') {
                        participantHTML += '<span class="participant-badge participant-all">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Everyone</span>';
                    } else if (typeof participants === 'object' && !Array.isArray(participants)) {
                        // New format: {adults: X, kids: Y}
                        const adults = participants.adults || 0;
                        const kids = participants.kids || 0;
                        if (adults > 0 || kids > 0) {
                            let label = [];
                            if (adults > 0) label.push(`${adults} adult${adults > 1 ? 's' : ''}`);
                            if (kids > 0) label.push(`${kids} kid${kids > 1 ? 's' : ''}`);
                            participantHTML += `<span class="participant-badge participant-custom">üë• ${label.join(' + ')}</span>`;
                        }
                    } else if (Array.isArray(participants)) {
                        // Old format: array of participant types (backwards compatibility)
                        const oldLabels = {
                            'all': 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ All Families',
                            'older-kids': 'üßí Older Kids (8-9) + Adults',
                            'younger-kids': 'üë∂ Younger Kids (5) + Adults',
                            'adults-only': 'üë®‚Äçüë© Adults Only',
                            'split-groups': 'üîÄ Split Groups'
                        };
                        participants.forEach(p => {
                            const cssClass = oldLabels[p] ? `participant-${p}` : 'participant-custom';
                            const label = oldLabels[p] || p;
                            participantHTML += `<span class="participant-badge ${cssClass}">${label}</span>`;
                        });
                    }
                    participantHTML += '</div>';
                }

                const websiteLinkHTML = activity.website
                    ? `<p style="margin-top: 10px;">
                         <a href="${activity.website}" target="_blank" rel="noopener noreferrer"
                            style="color: #10b981; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                           üîó Visit Website
                         </a>
                       </p>`
                    : '';

                const activityDiv = document.createElement('div');
                activityDiv.className = 'selected-activity';
                activityDiv.innerHTML = `
                    <button class="remove-btn" onclick="removeActivity('${dayKey}', ${index})">Remove</button>
                    <h4>${activity.icon} ${activity.title}</h4>
                    ${participantHTML}
                    <p><strong>Travel Time:</strong> ${activity.travelTime} | <strong>Duration:</strong> ${activity.duration}</p>
                    <p><strong>Ages:</strong> ${activity.ages} | <strong>Cost:</strong> ${activity.cost}</p>
                    <p style="margin-top: 10px;">${activity.description}</p>
                    ${websiteLinkHTML}
                `;
                dayDiv.appendChild(activityDiv);
            });
        }

        function renderActivities(category = 'all') {
            const grid = document.getElementById('activities-grid');
            grid.innerHTML = '';

            const filtered = category === 'all'
                ? activities
                : activities.filter(a => a.category.includes(category));

            filtered.forEach(activity => {
                const card = createActivityCard(activity);
                grid.appendChild(card);
            });
        }

        function createActivityCard(activity) {
            const card = document.createElement('div');
            card.className = 'activity-card';

            const tags = activity.category.map(cat =>
                `<span class="activity-tag tag-${cat}">${cat}</span>`
            ).join(' ');

            const websiteHTML = activity.website
                ? `<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
                     <a href="${activity.website}" target="_blank" rel="noopener noreferrer"
                        style="color: #10b981; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;"
                        onclick="event.stopPropagation();">
                       üîó Visit Website
                     </a>
                   </div>`
                : '';

            card.innerHTML = `
                <div class="activity-icon">${activity.icon}</div>
                ${tags}
                <div class="activity-title">${activity.title}</div>
                <div class="activity-description">${activity.description}</div>
                <div class="activity-details">
                    <div class="detail-item">
                        <div class="detail-label">üöó Travel Time:</div>
                        <div class="detail-value">${activity.travelTime}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ages:</div>
                        <div class="detail-value">${activity.ages}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üíµ Cost:</div>
                        <div class="detail-value">${activity.cost}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">‚è±Ô∏è Duration:</div>
                        <div class="detail-value">${activity.duration}</div>
                    </div>
                </div>
                ${websiteHTML}
            `;

            return card;
        }

        function setupFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.dataset.category;
                    renderActivities(category);
                });
            });
        }

        function openModal(dayKey) {
            currentDay = dayKey;
            selectedActivityId = null;
            participantMode = null;

            document.getElementById('modal-day-title').textContent = dayKey.replace('day', 'Day ');

            // Show step 1, hide step 2
            document.querySelector('.modal-step-1').classList.remove('hidden');
            document.querySelector('.modal-step-2').classList.add('hidden');

            const modalGrid = document.getElementById('modal-activities-grid');
            modalGrid.innerHTML = '';

            activities.forEach(activity => {
                const card = createActivityCard(activity);
                card.addEventListener('click', function() {
                    selectActivity(activity.id);
                });
                modalGrid.appendChild(card);
            });

            document.getElementById('activity-modal').style.display = 'block';
        }

        function selectActivity(activityId) {
            selectedActivityId = activityId;
            showParticipantSelector();
        }

        function showParticipantSelector() {
            const activity = activities.find(a => a.id === selectedActivityId);
            if (!activity) return;

            // Hide step 1, show step 2
            document.querySelector('.modal-step-1').classList.add('hidden');
            document.querySelector('.modal-step-2').classList.remove('hidden');

            // Show activity preview
            const preview = document.getElementById('selected-activity-preview');
            preview.innerHTML = `
                <div style="background: #f0fdf4; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #10b981;">
                    <h3 style="color: #047857; margin-bottom: 10px;">${activity.icon} ${activity.title}</h3>
                    <p style="color: #059669; font-size: 0.95em;">${activity.description}</p>
                </div>
            `;

            // Reset participant selection
            participantMode = null;
            document.getElementById('everyone-btn').classList.remove('selected');
            document.getElementById('adults-count').value = 0;
            document.getElementById('kids-count').value = 0;
        }

        function selectEveryone() {
            const btn = document.getElementById('everyone-btn');
            btn.classList.add('selected');
            participantMode = 'everyone';

            // Reset count inputs
            document.getElementById('adults-count').value = 0;
            document.getElementById('kids-count').value = 0;
        }

        function updateSpecificCount() {
            const adults = parseInt(document.getElementById('adults-count').value) || 0;
            const kids = parseInt(document.getElementById('kids-count').value) || 0;

            if (adults > 0 || kids > 0) {
                participantMode = 'specific';
                document.getElementById('everyone-btn').classList.remove('selected');
            } else {
                participantMode = null;
            }
        }

        function confirmActivityWithParticipants() {
            let participants = null;

            if (participantMode === 'everyone') {
                participants = 'everyone';
            } else if (participantMode === 'specific') {
                const adults = parseInt(document.getElementById('adults-count').value) || 0;
                const kids = parseInt(document.getElementById('kids-count').value) || 0;
                participants = { adults, kids };
            }

            // Add activity with participants
            if (selectedActivityId && currentDay) {
                addActivityToDay(currentDay, selectedActivityId, participants);
                closeModal();
            }
        }

        function closeModal() {
            document.getElementById('activity-modal').style.display = 'none';
            currentDay = null;
            selectedActivityId = null;
            participantMode = null;
        }

        function addActivityToDay(dayKey, activityId, participants = null) {
            // Check if activity already exists (comparing just the activity ID)
            const exists = itinerary[dayKey].some(item => {
                const id = typeof item === 'object' ? item.activityId : item;
                return id === activityId;
            });

            if (!exists) {
                itinerary[dayKey].push({
                    activityId: activityId,
                    participants: participants
                });
                renderDayActivities(dayKey);
                saveItinerary();
            }
        }

        function removeActivity(dayKey, index) {
            itinerary[dayKey].splice(index, 1);
            renderDayActivities(dayKey);
            saveItinerary();
        }

        function saveItinerary() {
            localStorage.setItem('costaRicaItinerary', JSON.stringify(itinerary));
        }

        function loadItinerary() {
            const saved = localStorage.getItem('costaRicaItinerary');
            if (saved) {
                itinerary = JSON.parse(saved);
                renderItinerary();
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('activity-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
